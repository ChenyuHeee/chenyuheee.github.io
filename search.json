[{"title":"在线编译器设计体验","url":"/2025/11/03/项目/Compiler/","content":"# 在线编译器设计体验\n\n-------\n[点击此处-项目呈现](/projects/compiler/)   |   [点击查看更新日志](/projects/compiler/CHANGELOG.md)\n-------\n## 设计思路\n- 整体布局：\n    - 主界面代码编辑器\n    - 顶部工具栏\n    - 侧边栏（输入输出）\n- 代码编辑器：\n    使用Monaco Editor（VS Code的编辑器核心）实现C语言语法高亮\n- 编译功能：\n    通过后端API调用编译器（如GCC）执行代码\n- 响应式设计：\n    适配不同屏幕尺寸\n## 实现方式\n- Github Pages搭建\n- 调用编译器api\n- 大模型补足\n## 具体实践\n### 1.Github Pages搭建\n内置在博客网站内\n```\n/compiler/\n```\n### 2.通过大模型实现基本需求\n#### Deepseek生成最初版本\n```\n<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>C语言在线编译器</title>\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs/loader.js\"></script>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n        }\n        \n        body {\n            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);\n            color: #333;\n            min-height: 100vh;\n            display: flex;\n            flex-direction: column;\n        }\n        \n        .container {\n            display: flex;\n            flex-direction: column;\n            flex: 1;\n            max-width: 1400px;\n            margin: 0 auto;\n            background: rgba(255, 255, 255, 0.95);\n            border-radius: 12px;\n            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n            overflow: hidden;\n            margin-top: 20px;\n            margin-bottom: 20px;\n        }\n        \n        header {\n            background: #2c3e50;\n            color: white;\n            padding: 15px 25px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n        }\n        \n        .logo {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n        \n        .logo i {\n            font-size: 24px;\n            color: #3498db;\n        }\n        \n        .logo h1 {\n            font-size: 24px;\n            font-weight: 600;\n        }\n        \n        .main-content {\n            display: flex;\n            flex: 1;\n            height: calc(100vh - 150px);\n        }\n        \n        .editor-container {\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n            border-right: 1px solid #e0e0e0;\n        }\n        \n        .editor-header {\n            padding: 10px 15px;\n            background: #f5f5f5;\n            border-bottom: 1px solid #e0e0e0;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n        }\n        \n        .editor-header h2 {\n            font-size: 18px;\n            color: #2c3e50;\n        }\n        \n        #editor {\n            flex: 1;\n            min-height: 400px;\n        }\n        \n        .toolbar {\n            padding: 10px 15px;\n            background: #f5f5f5;\n            border-top: 1px solid #e0e0e0;\n            display: flex;\n            gap: 10px;\n        }\n        \n        .btn {\n            padding: 8px 15px;\n            border: none;\n            border-radius: 4px;\n            cursor: pointer;\n            font-weight: 500;\n            display: flex;\n            align-items: center;\n            gap: 6px;\n            transition: all 0.3s ease;\n        }\n        \n        .btn-primary {\n            background: #3498db;\n            color: white;\n        }\n        \n        .btn-primary:hover {\n            background: #2980b9;\n            transform: translateY(-2px);\n        }\n        \n        .btn-success {\n            background: #2ecc71;\n            color: white;\n        }\n        \n        .btn-success:hover {\n            background: #27ae60;\n            transform: translateY(-2px);\n        }\n        \n        .btn-danger {\n            background: #e74c3c;\n            color: white;\n        }\n        \n        .btn-danger:hover {\n            background: #c0392b;\n            transform: translateY(-2px);\n        }\n        \n        .sidebar {\n            width: 400px;\n            display: flex;\n            flex-direction: column;\n            background: #f9f9f9;\n            transition: transform 0.3s ease;\n        }\n        \n        .sidebar.hidden {\n            transform: translateX(100%);\n        }\n        \n        .sidebar-header {\n            padding: 10px 15px;\n            background: #34495e;\n            color: white;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n        }\n        \n        .sidebar-section {\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n            border-bottom: 1px solid #e0e0e0;\n        }\n        \n        .sidebar-section:last-child {\n            border-bottom: none;\n        }\n        \n        .section-header {\n            padding: 10px 15px;\n            background: #ecf0f1;\n            border-bottom: 1px solid #e0e0e0;\n            font-weight: 500;\n            color: #2c3e50;\n        }\n        \n        .section-content {\n            flex: 1;\n            padding: 15px;\n            overflow: auto;\n        }\n        \n        textarea {\n            width: 100%;\n            height: 100%;\n            padding: 10px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            resize: none;\n            font-family: monospace;\n        }\n        \n        .output {\n            background: #2c3e50;\n            color: #ecf0f1;\n            padding: 10px;\n            border-radius: 4px;\n            height: 100%;\n            overflow: auto;\n            font-family: monospace;\n            white-space: pre-wrap;\n        }\n        \n        .toggle-sidebar {\n            position: absolute;\n            right: 20px;\n            top: 80px;\n            background: #3498db;\n            color: white;\n            border: none;\n            border-radius: 50%;\n            width: 40px;\n            height: 40px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            cursor: pointer;\n            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n            transition: all 0.3s ease;\n        }\n        \n        .toggle-sidebar:hover {\n            background: #2980b9;\n            transform: scale(1.1);\n        }\n        \n        footer {\n            text-align: center;\n            padding: 15px;\n            background: #2c3e50;\n            color: #ecf0f1;\n            font-size: 14px;\n        }\n        \n        @media (max-width: 768px) {\n            .main-content {\n                flex-direction: column;\n            }\n            \n            .sidebar {\n                width: 100%;\n                height: 40%;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <header>\n            <div class=\"logo\">\n                <i class=\"fas fa-code\"></i>\n                <h1>C语言在线编译器</h1>\n            </div>\n            <div class=\"header-info\">\n                <span>安全、快速、便捷的在线C语言编程环境</span>\n            </div>\n        </header>\n        \n        <div class=\"main-content\">\n            <div class=\"editor-container\">\n                <div class=\"editor-header\">\n                    <h2><i class=\"fas fa-file-code\"></i> 代码编辑器 (main.c)</h2>\n                    <div class=\"editor-actions\">\n                        <span class=\"status\">已保存</span>\n                    </div>\n                </div>\n                <div id=\"editor\"></div>\n                <div class=\"toolbar\">\n                    <button class=\"btn btn-primary\" id=\"compileBtn\">\n                        <i class=\"fas fa-play\"></i> 编译运行\n                    </button>\n                    <button class=\"btn btn-success\" id=\"saveBtn\">\n                        <i class=\"fas fa-save\"></i> 保存代码\n                    </button>\n                    <button class=\"btn btn-danger\" id=\"resetBtn\">\n                        <i class=\"fas fa-redo\"></i> 重置代码\n                    </button>\n                    <div style=\"flex: 1\"></div>\n                    <button class=\"btn\" id=\"themeToggle\">\n                        <i class=\"fas fa-moon\"></i> 切换主题\n                    </button>\n                </div>\n            </div>\n            \n            <div class=\"sidebar\" id=\"sidebar\">\n                <div class=\"sidebar-header\">\n                    <h3><i class=\"fas fa-terminal\"></i> 运行结果</h3>\n                    <button id=\"closeSidebar\"><i class=\"fas fa-times\"></i></button>\n                </div>\n                <div class=\"sidebar-section\">\n                    <div class=\"section-header\">\n                        <i class=\"fas fa-keyboard\"></i> 标准输入 (stdin)\n                    </div>\n                    <div class=\"section-content\">\n                        <textarea id=\"input\" placeholder=\"在此输入程序运行所需的输入...\">10 20</textarea>\n                    </div>\n                </div>\n                <div class=\"sidebar-section\">\n                    <div class=\"section-header\">\n                        <i class=\"fas fa-desktop\"></i> 输出结果 (stdout)\n                    </div>\n                    <div class=\"section-content\">\n                        <div class=\"output\" id=\"output\">程序输出将显示在这里...</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <button class=\"toggle-sidebar\" id=\"toggleSidebar\">\n            <i class=\"fas fa-chevron-left\"></i>\n        </button>\n        \n        <footer>\n            <p>C语言在线编译器 &copy; 2023 | 基于Monaco Editor构建 | 安全提示：请勿上传敏感信息</p>\n        </footer>\n    </div>\n\n    <script>\n        // 初始化Monaco Editor\n        require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs' }});\n        \n        require(['vs/editor/editor.main'], function() {\n            // 默认C语言代码\n            const defaultCode = `#include <stdio.h>\n\nint main() {\n    int a, b, sum;\n    \n    printf(\"请输入两个整数：\\\\n\");\n    scanf(\"%d %d\", &a, &b);\n    \n    sum = a + b;\n    \n    printf(\"两数之和为：%d\\\\n\", sum);\n    \n    return 0;\n}`;\n\n            // 创建编辑器实例\n            window.editor = monaco.editor.create(document.getElementById('editor'), {\n                value: defaultCode,\n                language: 'c',\n                theme: 'vs-light',\n                fontSize: 14,\n                minimap: { enabled: true },\n                automaticLayout: true,\n                scrollBeyondLastLine: false,\n                renderLineHighlight: 'all',\n                lineNumbers: 'on',\n                folding: true,\n                wordWrap: 'on'\n            });\n            \n            // 添加窗口大小变化时的自适应\n            window.addEventListener('resize', function() {\n                window.editor.layout();\n            });\n        });\n        \n        // DOM元素\n        const compileBtn = document.getElementById('compileBtn');\n        const saveBtn = document.getElementById('saveBtn');\n        const resetBtn = document.getElementById('resetBtn');\n        const themeToggle = document.getElementById('themeToggle');\n        const toggleSidebar = document.getElementById('toggleSidebar');\n        const closeSidebar = document.getElementById('closeSidebar');\n        const sidebar = document.getElementById('sidebar');\n        const input = document.getElementById('input');\n        const output = document.getElementById('output');\n        \n        // 编译按钮事件\n        compileBtn.addEventListener('click', function() {\n            output.textContent = \"编译中...\";\n            sidebar.classList.remove('hidden');\n            toggleSidebar.querySelector('i').className = 'fas fa-chevron-right';\n            \n            // 模拟编译过程\n            setTimeout(function() {\n                const code = window.editor.getValue();\n                const userInput = input.value;\n                \n                // 简单模拟编译结果\n                if (code.includes('scanf') && userInput.trim() === '') {\n                    output.textContent = \"错误: 程序需要输入但未提供输入数据\";\n                    return;\n                }\n                \n                // 模拟程序输出\n                if (userInput.trim() !== '') {\n                    const inputs = userInput.split(' ');\n                    if (inputs.length >= 2) {\n                        const a = parseInt(inputs[0]);\n                        const b = parseInt(inputs[1]);\n                        output.textContent = `请输入两个整数：\\n两数之和为：${a + b}`;\n                    } else {\n                        output.textContent = \"错误: 输入格式不正确，请输入两个整数\";\n                    }\n                } else {\n                    output.textContent = \"请输入两个整数：\\n两数之和为：30\";\n                }\n            }, 1500);\n        });\n        \n        // 保存按钮事件\n        saveBtn.addEventListener('click', function() {\n            const status = document.querySelector('.status');\n            status.textContent = \"已保存\";\n            status.style.color = \"#2ecc71\";\n            \n            setTimeout(() => {\n                status.textContent = \"已保存\";\n                status.style.color = \"\";\n            }, 2000);\n            \n            // 在实际应用中，这里应该将代码保存到服务器或本地存储\n            localStorage.setItem('savedCCode', window.editor.getValue());\n        });\n        \n        // 重置按钮事件\n        resetBtn.addEventListener('click', function() {\n            if (confirm(\"确定要重置代码吗？所有未保存的更改将丢失。\")) {\n                window.editor.setValue(defaultCode);\n            }\n        });\n        \n        // 主题切换\n        themeToggle.addEventListener('click', function() {\n            const currentTheme = monaco.editor.getTheme();\n            if (currentTheme === 'vs-light') {\n                monaco.editor.setTheme('vs-dark');\n                themeToggle.innerHTML = '<i class=\"fas fa-sun\"></i> 切换主题';\n                document.body.style.background = 'linear-gradient(135deg, #0f2027, #203a43, #2c5364)';\n            } else {\n                monaco.editor.setTheme('vs-light');\n                themeToggle.innerHTML = '<i class=\"fas fa-moon\"></i> 切换主题';\n                document.body.style.background = 'linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d)';\n            }\n        });\n        \n        // 侧边栏切换\n        toggleSidebar.addEventListener('click', function() {\n            sidebar.classList.toggle('hidden');\n            const icon = toggleSidebar.querySelector('i');\n            if (sidebar.classList.contains('hidden')) {\n                icon.className = 'fas fa-chevron-left';\n            } else {\n                icon.className = 'fas fa-chevron-right';\n            }\n        });\n        \n        closeSidebar.addEventListener('click', function() {\n            sidebar.classList.add('hidden');\n            toggleSidebar.querySelector('i').className = 'fas fa-chevron-left';\n        });\n        \n        // 从本地存储加载已保存的代码\n        window.addEventListener('load', function() {\n            const savedCode = localStorage.getItem('savedCCode');\n            if (savedCode) {\n                window.editor.setValue(savedCode);\n            }\n        });\n    </script>\n</body>\n</html>\n```\n该版本已实现：\n- 代码编辑器：\n    - 基于Monaco Editor，提供完整的C语言语法高亮\n    - 支持代码折叠、行号显示、自动换行等功能\n    - 主题切换（亮色/暗色）\n    - ~~真正的编译运行~~\n- 工具栏功能：\n    - 编译运行：执行代码并显示结果\n    - 保存代码：将代码保存到本地存储\n    - 重置代码：恢复默认代码示例\n    - 主题切换：切换编辑器主题\n- 侧边栏：\n    - 标准输入区域：提供程序运行所需的输入\n    - 输出结果区域：显示程序执行结果\n    - 可展开/折叠的侧边栏设计\n- 响应式设计：\n    - 适配不同屏幕尺寸，在移动设备上自动调整布局\n##### 学习收获\n1. **前端技术整合** - 将Monaco Editor集成到网页中实现专业代码编辑体验\n2. **UI/UX设计** - 设计直观的编译器界面，合理布局编辑区与结果展示区\n3. **交互逻辑** - 实现代码编译、保存、重置等功能的完整用户流程\n4. **响应式设计** - 确保网站在不同设备上都能良好显示\n5. **项目规划** - 从需求分析到功能实现的完整开发流程\n\n#### GPT-5优化\n目标：\n- 美化界面\n- 精简代码\n- 增添注释帮助学习理解\n代码实现：\n```\n<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n    <title>C 语言在线编译器（简洁版）</title>\n    <!-- 字体图标和 Monaco 加载器 -->\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs/loader.js\"></script>\n\n    <style>\n        /* 主题变量，便于快速定制 */\n        :root{\n            --bg-start: #1a2a6c;\n            --bg-mid: #b21f1f;\n            --bg-end: #fdbb2d;\n            --card-bg: rgba(255,255,255,0.98);\n            --primary: #3498db;\n            --muted: #6b7280;\n            --shadow: 0 10px 30px rgba(0,0,0,0.15);\n            --radius: 10px;\n        }\n\n        *{box-sizing:border-box;margin:0;padding:0}\n        html,body{height:100%;font-family:Inter,Segoe UI,Helvetica,Arial,sans-serif}\n\n        body{\n            background:linear-gradient(135deg,var(--bg-start),var(--bg-mid),var(--bg-end));\n            display:flex;align-items:stretch;justify-content:center;padding:20px;\n        }\n\n        /* 容器 */\n        .app{\n            width:100%;max-width:1200px;background:var(--card-bg);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column;height:calc(100vh - 40px);\n        }\n\n        header{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;background:#223247;color:#fff}\n        header .title{display:flex;align-items:center;gap:12px;font-weight:600}\n        header .title i{color:var(--primary);font-size:20px}\n        header .meta{color:var(--muted);font-size:13px}\n\n        /* 主区：编辑器 + 侧栏 */\n        .main{flex:1;display:flex;min-height:0}\n\n        /* 编辑区 */\n        .editor-wrap{flex:1;display:flex;flex-direction:column;border-right:1px solid #eee}\n        .editor-head{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:#fafafa;border-bottom:1px solid #eee}\n        .editor-head h2{font-size:15px;color:#243b53}\n        #editor{flex:1;min-height:200px}\n\n        /* 工具栏 */\n        .toolbar{display:flex;gap:8px;padding:10px 14px;background:#fafafa;border-top:1px solid #eee;align-items:center}\n        .btn{border:0;padding:8px 12px;border-radius:6px;cursor:pointer;font-weight:600;display:inline-flex;align-items:center;gap:8px}\n        .btn-primary{background:var(--primary);color:#fff}\n        .btn-ghost{background:transparent;border:1px solid #e6e6e6}\n\n        /* 侧栏 */\n        .sidebar{width:360px;display:flex;flex-direction:column;background:#f7f9fb}\n        .sb-head{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;background:#2f4356;color:#fff}\n        .sb-section{padding:12px 14px;flex:1;overflow:auto}\n        textarea,input[type=text]{width:100%;padding:10px;border:1px solid #e3e8ee;border-radius:6px;font-family:monospace}\n        .output{background:#0f1b2a;color:#dfefff;padding:12px;border-radius:6px;white-space:pre-wrap;height:100%;overflow:auto;font-family:monospace}\n\n        /* 小屏适配 */\n        @media (max-width:900px){\n            .main{flex-direction:column}\n            .sidebar{width:100%;height:38%}\n            .editor-wrap{border-right:0}\n        }\n    </style>\n</head>\n<body>\n    <div class=\"app\">\n        <header>\n            <div class=\"title\"><i class=\"fas fa-code\"></i><div>C 语言在线编译器</div></div>\n            <div class=\"meta\">安全提醒：此页面仅做演示，本地运行即可</div>\n        </header>\n\n        <div class=\"main\">\n            <div class=\"editor-wrap\">\n                <div class=\"editor-head\">\n                    <h2><i class=\"fas fa-file-code\"></i> main.c</h2>\n                    <div class=\"status\" id=\"saveStatus\">已保存</div>\n                </div>\n\n                <div id=\"editor\"></div>\n\n                <div class=\"toolbar\">\n                    <button class=\"btn btn-primary\" id=\"runBtn\"><i class=\"fas fa-play\"></i> 运行</button>\n                    <button class=\"btn btn-ghost\" id=\"saveBtn\"><i class=\"fas fa-save\"></i> 保存</button>\n                    <button class=\"btn btn-ghost\" id=\"resetBtn\"><i class=\"fas fa-undo\"></i> 重置</button>\n                    <div style=\"flex:1\"></div>\n                    <button class=\"btn btn-ghost\" id=\"themeBtn\"><i class=\"fas fa-moon\"></i> 主题</button>\n                </div>\n            </div>\n\n            <aside class=\"sidebar\" id=\"sidebar\">\n                <div class=\"sb-head\"><div><i class=\"fas fa-terminal\"></i> 运行结果</div><button id=\"closeSb\" class=\"btn btn-ghost\">关闭</button></div>\n                <div class=\"sb-section\">\n                    <label>标准输入 (stdin)</label>\n                    <textarea id=\"stdin\" rows=\"3\" placeholder=\"例如：10 20\">10 20</textarea>\n                    <div style=\"height:12px\"></div>\n                    <label>输出 (stdout)</label>\n                    <div class=\"output\" id=\"stdout\">程序输出将显示在这里...</div>\n                </div>\n            </aside>\n        </div>\n    </div>\n\n    <script>\n        /**********************************************************************\n         * 简洁版脚本：功能\n         * - 初始化 Monaco 编辑器\n         * - 本地保存/加载代码（localStorage）\n         * - 简单运行（模拟 scanf/printf）\n         * - 主题切换与 UI 状态更新\n         * 所有注释为中文，便于维护。\n         **********************************************************************/\n\n        // 默认代码（保持与 UI 功能一致的示例）\n        const DEFAULT_CODE = `#include <stdio.h>\n\nint main() {\n    int a, b;\n    // 读取两个整数并输出和\n    if (scanf(\"%d %d\", &a, &b) == 2) {\n        printf(\"两数之和为：%d\\n\", a + b);\n    } else {\n        printf(\"输入格式错误\\n\");\n    }\n    return 0;\n}`;\n\n        // DOM 引用\n        const runBtn = document.getElementById('runBtn');\n        const saveBtn = document.getElementById('saveBtn');\n        const resetBtn = document.getElementById('resetBtn');\n        const themeBtn = document.getElementById('themeBtn');\n        const stdinEl = document.getElementById('stdin');\n        const stdoutEl = document.getElementById('stdout');\n        const saveStatus = document.getElementById('saveStatus');\n        const closeSb = document.getElementById('closeSb');\n\n        // Monaco 编辑器需要异步加载\n        require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs' } });\n        require(['vs/editor/editor.main'], function () {\n            // 尝试从 localStorage 加载之前保存的代码\n            const saved = localStorage.getItem('deepseek_saved_c');\n            window.editor = monaco.editor.create(document.getElementById('editor'), {\n                value: saved || DEFAULT_CODE,\n                language: 'c',\n                theme: 'vs-light',\n                automaticLayout: true,\n                minimap: { enabled: false },\n                fontSize: 13,\n                scrollBeyondLastLine: false\n            });\n\n            // 快捷键：Ctrl/Cmd+S 保存\n            window.addEventListener('keydown', (e) => {\n                if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 's') {\n                    e.preventDefault(); saveCode();\n                }\n            });\n        });\n\n        // ----------------- 功能函数 -----------------\n        // 保存当前编辑器内容到 localStorage，并提示状态\n        function saveCode() {\n            if (!window.editor) return;\n            localStorage.setItem('deepseek_saved_c', window.editor.getValue());\n            saveStatus.textContent = '已保存';\n            saveStatus.style.color = '#22c55e';\n            setTimeout(() => { saveStatus.style.color = ''; }, 1200);\n        }\n\n        // 将编辑器内容重置为默认代码（不会清除 localStorage）\n        function resetCode() {\n            if (!window.editor) return;\n            if (!confirm('确定重置代码？未保存的更改将丢失。')) return;\n            window.editor.setValue(DEFAULT_CODE);\n        }\n\n        // 简单“运行”函数：模拟 scanf/printf 的行为，仅用于演示\n        // - 如果代码包含 scanf 且 stdin 为空，则提示错误\n        // - 否则把 stdin 按空白拆分为整数并输出和\n        function runCode() {\n            if (!window.editor) return;\n            stdoutEl.textContent = '运行中...';\n\n            // 模拟异步运行（更真实的体验）\n            setTimeout(() => {\n                const code = window.editor.getValue();\n                const input = (stdinEl.value || '').trim();\n\n                if (/scanf\\s*\\(/.test(code) && input === '') {\n                    stdoutEl.textContent = '错误：程序需要输入但未提供 stdin。';\n                    return;\n                }\n\n                if (input === '') {\n                    // 没有输入：展示友好示例输出\n                    stdoutEl.textContent = '提示：请在左侧输入两个整数，例如：10 20';\n                    return;\n                }\n\n                const parts = input.split(/\\s+/).map(s => parseInt(s, 10));\n                if (parts.length >= 2 && parts.every(n => Number.isFinite(n))) {\n                    const [a, b] = parts;\n                    stdoutEl.textContent = `两数之和为：${a + b}`;\n                } else {\n                    stdoutEl.textContent = '错误：输入格式不正确，请输入两个整数（例如：10 20）';\n                }\n            }, 400);\n        }\n\n        // 切换主题（轻/暗）\n        let isDark = false;\n        function toggleTheme() {\n            if (!window.monaco) { /* monaco 可能尚未加载 */ }\n            isDark = !isDark;\n            try {\n                monaco.editor.setTheme(isDark ? 'vs-dark' : 'vs-light');\n            } catch (e) { /* ignore */ }\n            themeBtn.innerHTML = isDark ? '<i class=\"fas fa-sun\"></i> 明亮' : '<i class=\"fas fa-moon\"></i> 暗色';\n        }\n\n        // ----------------- 事件绑定 -----------------\n        runBtn.addEventListener('click', runCode);\n        saveBtn.addEventListener('click', saveCode);\n        resetBtn.addEventListener('click', resetCode);\n        themeBtn.addEventListener('click', toggleTheme);\n        closeSb.addEventListener('click', () => { document.getElementById('sidebar').style.display = 'none'; });\n\n        // 页面卸载时自动保存（可选）\n        window.addEventListener('beforeunload', () => {\n            if (window.editor) localStorage.setItem('deepseek_saved_c', window.editor.getValue());\n        });\n    </script>\n</body>\n</html>\n```\n增添功能：\n保存：保存到 `localStorage `键 `deepseek_saved_c`，并在窗口关闭前自动保存一次（防止意外关闭丢失）。\n**学习收获**\n在GPT的帮助下阅读代码，理解更多css变量等形式\n\n### 初具雏形\n外观与ui设计在手动调整（如取色、位置等参数）后，符合需求\n代码展示：\n```\n<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n    <title>C 语言在线编译器（简洁版）</title>\n    <!-- 字体图标和 Monaco 加载器 -->\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs/loader.js\"></script>\n\n    <style>\n        /* 暗黑优先 - 极简 mac 风格 */\n        :root{\n            --bg: #0b0c0d;           /* 页面背景（near black） */\n            --panel: #0f1113;        /* 卡片 / 主容器背景 */\n            --muted: #9aa4ad;        /* 次要文字 */\n            --accent: #48a0ff;       /* 高亮色（适度） */\n            --glass: rgba(255,255,255,0.02);\n            --radius: 10px;\n            --shadow: 0 8px 30px rgba(0,0,0,0.6);\n        }\n\n        *{box-sizing:border-box;margin:0;padding:0}\n        html,body{height:100%;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial}\n        body{background:var(--bg);color:#e6eef6;}\n\n        /* 应用容器：占满整个视口，类似本地 app 的全屏编辑器 */\n        .app{height:100vh;width:100vw;display:flex;flex-direction:column;align-items:stretch;justify-content:stretch}\n        .frame{max-width:1400px;margin:12px auto;flex:1;background:var(--panel);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column}\n\n        header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent)}\n        header .title{display:flex;align-items:center;gap:10px;font-weight:600}\n        header .title i{color:var(--accent);font-size:18px}\n        header .meta{color:var(--muted);font-size:13px}\n\n        /* 主区：编辑器 + 侧栏 */\n        .main{flex:1;display:flex;min-height:0}\n\n        /* 编辑区 */\n        .editor-wrap{flex:1;display:flex;flex-direction:column;border-right:1px solid rgba(255,255,255,0.03)}\n        .editor-head{display:flex;align-items:center;justify-content:space-between;padding:10px 14px}\n        .editor-head h2{font-size:14px;color:#dbe9ff}\n        #editor{flex:1;min-height:200px}\n\n        /* 工具栏 */\n        .toolbar{display:flex;gap:8px;padding:10px 14px;align-items:center}\n        .btn{border:0;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600;display:inline-flex;align-items:center;gap:8px;background:transparent;color:#e6eef6}\n        .btn.primary{background:var(--accent);color:#071022}\n        .btn.ghost{border:1px solid rgba(255,255,255,0.04)}\n\n        /* 侧栏 */\n        .sidebar{width:380px;display:flex;flex-direction:column;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent)}\n        .sidebar.collapsed{transform:translateX(100%);transition:transform .28s ease}\n        .sb-head{display:flex;align-items:center;justify-content:space-between;padding:12px 14px}\n        .sb-section{padding:12px 14px;flex:1;overflow:auto}\n        textarea,input[type=text]{width:100%;padding:10px;border:1px solid rgba(255,255,255,0.03);border-radius:8px;background:transparent;color:#e6eef6;font-family:monospace}\n        .output{background:var(--glass);color:#dfefff;padding:12px;border-radius:8px;white-space:pre-wrap;height:100%;overflow:auto;font-family:monospace}\n\n        /* 悬浮的侧边栏切换按钮（当侧栏折叠时可恢复） */\n        #sidebarToggle{position:fixed;right:18px;bottom:24px;width:44px;height:44px;border-radius:10px;background:var(--panel);border:1px solid rgba(255,255,255,0.04);display:flex;align-items:center;justify-content:center;color:var(--accent);box-shadow:var(--shadow);cursor:pointer}\n\n        /* 小屏适配 */\n        @media (max-width:900px){\n            .main{flex-direction:column}\n            .sidebar{width:100%;height:34%}\n            .editor-wrap{border-right:0}\n        }\n    </style>\n</head>\n<body>\n    <div class=\"app\">\n        <header>\n            <div class=\"title\"><i class=\"fas fa-code\"></i><div>C 语言在线编译器</div></div>\n            <div class=\"meta\">安全提醒：此页面仅做演示，本地运行即可</div>\n        </header>\n\n        <div class=\"main\">\n            <div class=\"editor-wrap\">\n                <div class=\"editor-head\">\n                    <h2><i class=\"fas fa-file-code\"></i> main.c</h2>\n                    <div class=\"status\" id=\"saveStatus\">已保存</div>\n                </div>\n\n                <div id=\"editor\"></div>\n\n                <div class=\"toolbar\">\n                    <button class=\"btn primary\" id=\"runBtn\"><i class=\"fas fa-play\"></i> 运行</button>\n                    <button class=\"btn ghost\" id=\"saveBtn\"><i class=\"fas fa-save\"></i> 保存</button>\n                    <button class=\"btn ghost\" id=\"resetBtn\"><i class=\"fas fa-undo\"></i> 重置</button>\n                    <button class=\"btn ghost\" id=\"fsBtn\" title=\"全屏\"><i class=\"fas fa-expand\"></i></button>\n                    <div style=\"flex:1\"></div>\n                    <button class=\"btn ghost\" id=\"themeBtn\"><i class=\"fas fa-sun\"></i> 主题</button>\n                </div>\n            </div>\n\n            <aside class=\"sidebar\" id=\"sidebar\">\n                <div class=\"sb-head\"><div><i class=\"fas fa-terminal\"></i> 运行结果</div><button id=\"closeSb\" class=\"btn ghost\">折叠</button></div>\n                <div class=\"sb-section\">\n                    <label>标准输入 (stdin)</label>\n                    <textarea id=\"stdin\" rows=\"3\" placeholder=\"例如：10 20\">10 20</textarea>\n                    <div style=\"height:12px\"></div>\n                    <label>输出 (stdout)</label>\n                    <div class=\"output\" id=\"stdout\">程序输出将显示在这里...</div>\n                </div>\n            </aside>\n        </div>\n    </div>\n\n    <!-- 折叠后恢复侧栏的悬浮按钮 -->\n    <div id=\"sidebarToggle\" title=\"打开侧栏\"><i class=\"fas fa-chevron-left\"></i></div>\n\n    <script>\n        /**********************************************************************\n         * 简洁版脚本：功能\n         * - 初始化 Monaco 编辑器\n         * - 本地保存/加载代码（localStorage）\n         * - 简单运行（模拟 scanf/printf）\n         * - 主题切换与 UI 状态更新\n         * 所有注释为中文，便于维护。\n         **********************************************************************/\n\n        // 默认代码（保持与 UI 功能一致的示例）\n        const DEFAULT_CODE = `#include <stdio.h>\n\nint main() {\n    int a, b;\n    // 读取两个整数并输出和\n    if (scanf(\"%d %d\", &a, &b) == 2) {\n        printf(\"两数之和为：%d\\n\", a + b);\n    } else {\n        printf(\"输入格式错误\\n\");\n    }\n    return 0;\n}`;\n\n        // DOM 引用\n        const runBtn = document.getElementById('runBtn');\n        const saveBtn = document.getElementById('saveBtn');\n        const resetBtn = document.getElementById('resetBtn');\n        const themeBtn = document.getElementById('themeBtn');\n        const stdinEl = document.getElementById('stdin');\n        const stdoutEl = document.getElementById('stdout');\n        const saveStatus = document.getElementById('saveStatus');\n        const closeSb = document.getElementById('closeSb');\n\n        // Monaco 编辑器需要异步加载\n        require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs' } });\n        require(['vs/editor/editor.main'], function () {\n            // 尝试从 localStorage 加载之前保存的代码\n            const saved = localStorage.getItem('deepseek_saved_c');\n            window.editor = monaco.editor.create(document.getElementById('editor'), {\n                value: saved || DEFAULT_CODE,\n                language: 'c',\n                theme: 'vs-light',\n                automaticLayout: true,\n                minimap: { enabled: false },\n                fontSize: 13,\n                scrollBeyondLastLine: false\n            });\n\n            // 快捷键：Ctrl/Cmd+S 保存\n            window.addEventListener('keydown', (e) => {\n                if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 's') {\n                    e.preventDefault(); saveCode();\n                }\n            });\n        });\n\n    // ----------------- 功能函数 -----------------\n        // 保存当前编辑器内容到 localStorage，并提示状态\n        function saveCode() {\n            if (!window.editor) return;\n            localStorage.setItem('deepseek_saved_c', window.editor.getValue());\n            saveStatus.textContent = '已保存';\n            saveStatus.style.color = '#22c55e';\n            setTimeout(() => { saveStatus.style.color = ''; }, 1200);\n        }\n\n        // 将编辑器内容重置为默认代码（不会清除 localStorage）\n        function resetCode() {\n            if (!window.editor) return;\n            if (!confirm('确定重置代码？未保存的更改将丢失。')) return;\n            window.editor.setValue(DEFAULT_CODE);\n        }\n\n        // runCode: 优先调用后端编译器 API；若网络或后端不可用则回退到本地模拟\n        // 后端 API 约定（示例）：\n        // POST /api/compile  body: { language: 'c', code: string, stdin: string }\n        // 返回: { stdout: string, stderr: string, exitCode: number }\n        async function runCode() {\n            if (!window.editor) return;\n            stdoutEl.textContent = '运行中（尝试后端编译）...';\n\n            const code = window.editor.getValue();\n            const stdin = (stdinEl.value || '').trim();\n\n            // 如果后端地址不可用或超时，回退到本地模拟\n            const backendUrl = '/api/compile'; // 请在后端服务中实现此路由\n\n            // 超时辅助函数\n            const fetchWithTimeout = (url, opts, timeout = 10000) => {\n                return Promise.race([\n                    fetch(url, opts),\n                    new Promise((_, rej) => setTimeout(() => rej(new Error('timeout')), timeout))\n                ]);\n            };\n\n            try {\n                const resp = await fetchWithTimeout(backendUrl, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ language: 'c', code, stdin })\n                }, 10000);\n\n                if (!resp.ok) throw new Error('后端返回错误: ' + resp.status);\n                const data = await resp.json();\n\n                // 根据后端返回渲染输出（约定字段：stdout/stderr/exitCode）\n                let out = '';\n                if (data.stdout) out += data.stdout;\n                if (data.stderr) out += '\\n[stderr]\\n' + data.stderr;\n                out += `\\n[exit code] ${data.exitCode ?? 0}`;\n                stdoutEl.textContent = out.trim();\n                return;\n            } catch (e) {\n                // 后端不可用或超时，回退到本地模拟\n                console.warn('后端编译失败，回退到本地模拟：', e);\n                simulateRun(code, stdin);\n            }\n        }\n\n        // 本地回退：简单模拟 scanf/printf 行为（仅作演示）\n        function simulateRun(code, input) {\n            stdoutEl.textContent = '本地模拟运行...';\n            setTimeout(() => {\n                if (/scanf\\s*\\(/.test(code) && (!input || input.trim() === '')) {\n                    stdoutEl.textContent = '错误：程序需要输入但未提供 stdin。';\n                    return;\n                }\n\n                if (!input || input.trim() === '') {\n                    stdoutEl.textContent = '提示：请在左侧输入两个整数，例如：10 20';\n                    return;\n                }\n\n                const parts = input.split(/\\s+/).map(s => parseInt(s, 10));\n                if (parts.length >= 2 && parts.every(n => Number.isFinite(n))) {\n                    const [a, b] = parts;\n                    stdoutEl.textContent = `两数之和为：${a + b}`;\n                } else {\n                    stdoutEl.textContent = '错误：输入格式不正确，请输入两个整数（例如：10 20）';\n                }\n            }, 300);\n        }\n\n        // 切换主题（轻/暗），默认暗黑\n        let isDark = true;\n        function toggleTheme() {\n            isDark = !isDark;\n            try { monaco.editor.setTheme(isDark ? 'vs-dark' : 'vs-light'); } catch (e) {}\n            themeBtn.innerHTML = isDark ? '<i class=\"fas fa-sun\"></i> 明亮' : '<i class=\"fas fa-moon\"></i> 暗色';\n        }\n\n        // ----------------- 事件绑定 -----------------\n        runBtn.addEventListener('click', runCode);\n        saveBtn.addEventListener('click', saveCode);\n        resetBtn.addEventListener('click', resetCode);\n        themeBtn.addEventListener('click', toggleTheme);\n\n        // 侧栏折叠/展开逻辑：使用 class 'collapsed'，便于动画与恢复\n        const sidebar = document.getElementById('sidebar');\n        const sidebarToggle = document.getElementById('sidebarToggle');\n        closeSb.addEventListener('click', () => {\n            sidebar.classList.add('collapsed');\n            sidebarToggle.style.display = 'flex';\n        });\n        sidebarToggle.addEventListener('click', () => {\n            sidebar.classList.remove('collapsed');\n            sidebarToggle.style.display = 'none';\n        });\n\n        // 全屏按钮\n        const fsBtn = document.getElementById('fsBtn');\n        fsBtn.addEventListener('click', () => {\n            const el = document.querySelector('.frame');\n            if (!document.fullscreenElement) {\n                el.requestFullscreen?.();\n            } else {\n                document.exitFullscreen?.();\n            }\n        });\n\n        // 页面卸载时自动保存（可选）\n        window.addEventListener('beforeunload', () => {\n            if (window.editor) localStorage.setItem('deepseek_saved_c', window.editor.getValue());\n        });\n\n        // 页面加载时：设置编辑器为暗黑主题（若 monaco 已加载则在创建时设置，若晚加载则尝试设置）\n        window.addEventListener('load', () => {\n            try { if (window.monaco) monaco.editor.setTheme('vs-dark'); } catch (e) {}\n            // 初始时隐藏侧栏恢复按钮（默认展开）\n            document.getElementById('sidebarToggle').style.display = 'none';\n        });\n    </script>\n</body>\n</html>\n```\n**后续目标**\n用VS Code中的copilot Agent模式为我规划整个项目，尝试接入真实的编译后端。\n### 遇到问题\n*GitHub Pages 只托管静态文件，不能运行编译后端，所以你必须额外部署或使用第三方服务来执行编译/运行。*\nGithub Actions可以实现编译，但是延迟时间过长，实用效果不佳\n**解决方案**\n1. 使用 Judge0（托管版或自托管开源 Judge0）\n\n概要：Judge0 是流行的在线评测 API（支持多语言）。你可以直接调用 Judge0 提供的 API（托管/付费），或在自己的 VPS 上用 Docker Compose 自托管 Judge0 服务。\n优点：成熟、支持多语言、接口简单（HTTP API）、支持限制运行时/内存/时间、开箱即用；自托管可完全控制。\n缺点：托管版受限于配额/费用；自托管需要 VPS + Docker，需注意安全与资源隔离（容器逃逸风险）。\n成本：托管版按请求/配额付费；自托管仅 VPS 成本（例如 $5–20/月 取决使用量）。\n推荐场景：想要快速上线且需要多语言/稳定接口 → 推荐托管 Judge0；想完全控制并能运维 → 自托管 Judge0（我会提供 Docker Compose 示例）。\n\n2. 后端容器化服务（自建安全沙箱）\n\n概要：在 VPS、云虚拟机或容器服务（Fargate）上运行自己的编译器服务。每次执行都在容器或轻量 VM（gVisor、Firecracker）内运行，或使用已有的 sandbox 项目（isolate、nsjail）。\n优点：最灵活，可自定义编译器版本、环境、插件；更容易做白名单/定制化；适合企业级需求。\n缺点：实现复杂、运维成本高、必须正确隔离以避免被利用执行任意代码。\n成本：云实例 + 容器运行费用；如果使用 Firecracker 或 Fargate 成本更高。\n推荐场景：对安全/自定义/扩展性有高要求，且有运维能力。\n\n3. Serverless 容器/函数（AWS Lambda（容器）、Google Cloud Run）\n\n概要：把编译器打包为容器镜像，部署到 Cloud Run 或 Lambda（Container Image）等按需执行的平台。\n优点：按调用计费，自动伸缩，运维负担低；可以结合短暂隔离的容器执行。\n缺点：启动冷启动、执行时间和资源受限（Lambda 默认最多 15 分钟，且内存/磁盘限制），需要处理容器层面的安全隔离；成本随并发上涨。\n推荐场景：中等流量、希望少运维但接受平台约束时。\n\n4. 在浏览器里运行编译器（WASM）\n\n概要：使用 WebAssembly 版本的编译器（如 clang/emscripten 的 Wasm 构建，或 tcc-wasm / clang.wasm）在用户浏览器中直接编译并运行（WASI 可用时）。\n优点：无需后端、零延迟、无需你维护服务器、对用户更隐私安全（代码在本地运行）；适合教育、演示或小型程序。\n缺点：WASM 二进制较大（可能几十 MB），某些系统调用或库不可用，运行受浏览器环境限制（不能做全部系统交互），对复杂/长时任务不理想。\n推荐场景：你需要零运维、演示性质或能接受功能限制时（例如仅做 C 语言的简单运行示例）。\n\n5. 使用第三方付费 SaaS（如 Replit、Glot.io、某些 API 市场上的编译服务）\n\n概要：直接调用商业提供方的 REST API 来编译/运行代码。\n优点：开发最快、运维几乎为零、通常带 SLA 支持。\n缺点：受限于价格和配额、需要信任第三方处理用户代码（隐私/合规问题）。\n推荐场景：对可靠性/快速上线要求高且能接受付费。\n\n**最终选择**\n直接集成 Wandbox（方案 B）并实现回退到 WASM（双重策略）——我会把 runCode 编写为：try Wandbox via fetch -> 若成功显示结果；若 fetch 报错（含 CORS）或超时则调用本地 wasm（如果存在）或本地模拟。优点：优先真实编译器，且无需服务器（若 Wandbox CORS 可用）。我会给出完整的前端 fetch 实现、超时处理与错误提示。\n\n代码呈现\n```\n<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n    <title>C 语言在线编译器（简洁版）</title>\n    <!-- 字体图标和 Monaco 加载器 -->\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs/loader.js\"></script>\n\n    <style>\n        /* 暗黑优先 - 极简 mac 风格 */\n        :root{\n            --bg: #0b0c0d;           /* 页面背景（near black） */\n            --panel: #0f1113;        /* 卡片 / 主容器背景 */\n            --muted: #9aa4ad;        /* 次要文字 */\n            --accent: #48a0ff;       /* 高亮色（适度） */\n            --glass: rgba(255,255,255,0.02);\n            --radius: 10px;\n            --shadow: 0 8px 30px rgba(0,0,0,0.6);\n        }\n\n        *{box-sizing:border-box;margin:0;padding:0}\n        html,body{height:100%;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial}\n        body{background:var(--bg);color:#e6eef6;}\n\n        /* 应用容器：占满整个视口，类似本地 app 的全屏编辑器 */\n        .app{height:100vh;width:100vw;display:flex;flex-direction:column;align-items:stretch;justify-content:stretch}\n        .frame{max-width:1400px;margin:12px auto;flex:1;background:var(--panel);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column}\n\n        header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent)}\n        header .title{display:flex;align-items:center;gap:10px;font-weight:600}\n        header .title i{color:var(--accent);font-size:18px}\n        header .meta{color:var(--muted);font-size:13px}\n\n        /* 主区：编辑器 + 侧栏 */\n        .main{flex:1;display:flex;min-height:0}\n\n        /* 编辑区 */\n        .editor-wrap{flex:1;display:flex;flex-direction:column;border-right:1px solid rgba(255,255,255,0.03)}\n        .editor-head{display:flex;align-items:center;justify-content:space-between;padding:10px 14px}\n        .editor-head h2{font-size:14px;color:#dbe9ff}\n        #editor{flex:1;min-height:200px}\n\n        /* 工具栏 */\n        .toolbar{display:flex;gap:8px;padding:10px 14px;align-items:center}\n        .btn{border:0;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600;display:inline-flex;align-items:center;gap:8px;background:transparent;color:#e6eef6}\n        .btn.primary{background:var(--accent);color:#071022}\n        .btn.ghost{border:1px solid rgba(255,255,255,0.04)}\n\n        /* 侧栏 */\n        .sidebar{width:380px;display:flex;flex-direction:column;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent)}\n        .sidebar.collapsed{transform:translateX(100%);transition:transform .28s ease}\n        .sb-head{display:flex;align-items:center;justify-content:space-between;padding:12px 14px}\n        .sb-section{padding:12px 14px;flex:1;overflow:auto}\n        textarea,input[type=text]{width:100%;padding:10px;border:1px solid rgba(255,255,255,0.03);border-radius:8px;background:transparent;color:#e6eef6;font-family:monospace}\n        .output{background:var(--glass);color:#dfefff;padding:12px;border-radius:8px;white-space:pre-wrap;height:100%;overflow:auto;font-family:monospace}\n\n        /* 悬浮的侧边栏切换按钮（当侧栏折叠时可恢复） */\n        #sidebarToggle{position:fixed;right:18px;bottom:24px;width:44px;height:44px;border-radius:10px;background:var(--panel);border:1px solid rgba(255,255,255,0.04);display:flex;align-items:center;justify-content:center;color:var(--accent);box-shadow:var(--shadow);cursor:pointer}\n\n        /* 小屏适配 */\n        @media (max-width:900px){\n            .main{flex-direction:column}\n            .sidebar{width:100%;height:34%}\n            .editor-wrap{border-right:0}\n        }\n    </style>\n</head>\n<body>\n    <div class=\"app\">\n        <header>\n            <div class=\"title\"><i class=\"fas fa-code\"></i><div>C 语言在线编译器</div></div>\n            <div class=\"meta\">安全提醒：此页面仅做演示，本地运行即可</div>\n        </header>\n\n        <div class=\"main\">\n            <div class=\"editor-wrap\">\n                <div class=\"editor-head\">\n                    <h2><i class=\"fas fa-file-code\"></i> main.c</h2>\n                    <div class=\"status\" id=\"saveStatus\">已保存</div>\n                </div>\n\n                <div id=\"editor\"></div>\n\n                <div class=\"toolbar\">\n                    <button class=\"btn primary\" id=\"runBtn\"><i class=\"fas fa-play\"></i> 运行</button>\n                    <button class=\"btn ghost\" id=\"saveBtn\"><i class=\"fas fa-save\"></i> 保存</button>\n                    <button class=\"btn ghost\" id=\"resetBtn\"><i class=\"fas fa-undo\"></i> 重置</button>\n                    <button class=\"btn ghost\" id=\"fsBtn\" title=\"全屏\"><i class=\"fas fa-expand\"></i></button>\n                    <div style=\"flex:1\"></div>\n                    <button class=\"btn ghost\" id=\"themeBtn\"><i class=\"fas fa-sun\"></i> 主题</button>\n                </div>\n            </div>\n\n            <aside class=\"sidebar\" id=\"sidebar\">\n                <div class=\"sb-head\"><div><i class=\"fas fa-terminal\"></i> 运行结果</div><button id=\"closeSb\" class=\"btn ghost\">折叠</button></div>\n                <div class=\"sb-section\">\n                    <label>标准输入 (stdin)</label>\n                    <textarea id=\"stdin\" rows=\"3\" placeholder=\"例如：10 20\">10 20</textarea>\n                    <div style=\"height:12px\"></div>\n                    <label>输出 (stdout)</label>\n                    <div class=\"output\" id=\"stdout\">程序输出将显示在这里...</div>\n                </div>\n            </aside>\n        </div>\n    </div>\n\n    <!-- 折叠后恢复侧栏的悬浮按钮 -->\n    <div id=\"sidebarToggle\" title=\"打开侧栏\"><i class=\"fas fa-chevron-left\"></i></div>\n\n    <script>\n        /**********************************************************************\n         * 简洁版脚本：功能\n         * - 初始化 Monaco 编辑器\n         * - 本地保存/加载代码（localStorage）\n         * - 简单运行（模拟 scanf/printf）\n         * - 主题切换与 UI 状态更新\n         * 所有注释为中文，便于维护。\n         **********************************************************************/\n\n        // 默认代码（保持与 UI 功能一致的示例）\n        const DEFAULT_CODE = `#include <stdio.h>\n\nint main() {\n    int a, b;\n    // 读取两个整数并输出和\n    if (scanf(\"%d %d\", &a, &b) == 2) {\n        printf(\"两数之和为：%d\\n\", a + b);\n    } else {\n        printf(\"输入格式错误\\n\");\n    }\n    return 0;\n}`;\n\n        // DOM 引用\n        const runBtn = document.getElementById('runBtn');\n        const saveBtn = document.getElementById('saveBtn');\n        const resetBtn = document.getElementById('resetBtn');\n        const themeBtn = document.getElementById('themeBtn');\n        const stdinEl = document.getElementById('stdin');\n        const stdoutEl = document.getElementById('stdout');\n        const saveStatus = document.getElementById('saveStatus');\n        const closeSb = document.getElementById('closeSb');\n\n        // Monaco 编辑器需要异步加载\n        require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs' } });\n        require(['vs/editor/editor.main'], function () {\n            // 尝试从 localStorage 加载之前保存的代码\n            const saved = localStorage.getItem('deepseek_saved_c');\n            window.editor = monaco.editor.create(document.getElementById('editor'), {\n                value: saved || DEFAULT_CODE,\n                language: 'c',\n                theme: 'vs-light',\n                automaticLayout: true,\n                minimap: { enabled: false },\n                fontSize: 13,\n                scrollBeyondLastLine: false\n            });\n\n            // 快捷键：Ctrl/Cmd+S 保存\n            window.addEventListener('keydown', (e) => {\n                if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 's') {\n                    e.preventDefault(); saveCode();\n                }\n            });\n        });\n\n    // ----------------- 功能函数 -----------------\n        // 保存当前编辑器内容到 localStorage，并提示状态\n        function saveCode() {\n            if (!window.editor) return;\n            localStorage.setItem('deepseek_saved_c', window.editor.getValue());\n            saveStatus.textContent = '已保存';\n            saveStatus.style.color = '#22c55e';\n            setTimeout(() => { saveStatus.style.color = ''; }, 1200);\n        }\n\n        // 将编辑器内容重置为默认代码（不会清除 localStorage）\n        function resetCode() {\n            if (!window.editor) return;\n            if (!confirm('确定重置代码？未保存的更改将丢失。')) return;\n            window.editor.setValue(DEFAULT_CODE);\n        }\n\n        // runCode: 优先尝试 Wandbox（真实编译器），若失败尝试加载本地 WASM 运行器（若你已部署）\n        // 最后回退到原有的模拟（simulateRun）。Wandbox API: https://wandbox.org\n        async function tryWandboxCompile(code, stdin) {\n            const wandboxUrl = 'https://wandbox.org/api/compile.json';\n            const payload = {\n                code,\n                compiler: 'gcc-head', // 可改为 clang-head 或其他\n                stdin: stdin || undefined,\n                save: false\n            };\n\n            const fetchWithTimeout = (url, opts, timeout = 8000) => {\n                return Promise.race([\n                    fetch(url, opts),\n                    new Promise((_, rej) => setTimeout(() => rej(new Error('timeout')), timeout))\n                ]);\n            };\n\n            const resp = await fetchWithTimeout(wandboxUrl, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(payload)\n            }, 10000);\n\n            if (!resp.ok) throw new Error('Wandbox 返回 ' + resp.status);\n            const json = await resp.json();\n\n            // Wandbox 返回字段不总是固定，常见有: program_output / program_error / compiler_output\n            const out = (json.program_output || json.program_stdout || json.program || json.result || '') || '';\n            const err = (json.program_error || json.program_stderr || json.compiler_error || json.compiler_output || '') || '';\n            const status = json.status ?? 0;\n            return { stdout: out, stderr: err, exitCode: status };\n        }\n\n        // 动态加载前端 WASM 运行器（如果你在 repo 下放置了 /wasm/tcc_runner.js）\n        function loadScript(url) {\n            return new Promise((resolve, reject) => {\n                const s = document.createElement('script');\n                s.src = url;\n                s.onload = () => resolve();\n                s.onerror = (e) => reject(new Error('加载失败: ' + url));\n                document.head.appendChild(s);\n            });\n        }\n\n        // 如果用户在仓库中放置了一个基于 tcc/clang 的 wasm 运行器并暴露 window.wasmRun(code, stdin)\n        async function tryWasmRun(code, stdin) {\n            // 常用路径：/wasm/tcc_runner.js（你需要把相应的脚本和 wasm 放到该路径）\n            if (typeof window.wasmRun === 'function') {\n                return await window.wasmRun(code, stdin);\n            }\n\n            // 尝试动态加载预期的脚本（如果你已上传）\n            try {\n                await loadScript('/wasm/tcc_runner.js');\n                if (typeof window.wasmRun === 'function') {\n                    return await window.wasmRun(code, stdin);\n                } else {\n                    throw new Error('wasmRun 未在脚本中暴露');\n                }\n            } catch (e) {\n                throw e;\n            }\n        }\n\n        async function runCode() {\n            if (!window.editor) return;\n            stdoutEl.textContent = '运行中（尝试 Wandbox 公共 API）...';\n\n            const code = window.editor.getValue();\n            const stdin = (stdinEl.value || '').trim();\n\n            // 1) 先尝试 Wandbox（真实编译器）\n            try {\n                const res = await tryWandboxCompile(code, stdin);\n                let out = '';\n                if (res.stdout) out += res.stdout;\n                if (res.stderr) out += '\\n[stderr]\\n' + res.stderr;\n                out += `\\n[exit code] ${res.exitCode ?? 0}`;\n                stdoutEl.textContent = out.trim();\n                return;\n            } catch (e) {\n                console.warn('Wandbox 调用失败：', e);\n                stdoutEl.textContent = 'Wandbox 不可用或被阻止，尝试浏览器端 WASM（若已部署）...';\n            }\n\n            // 2) 尝试浏览器端 WASM 运行器（如果你在仓库放置了对应文件）\n            try {\n                const wasmRes = await tryWasmRun(code, stdin);\n                // 约定 wasmRun 返回 { stdout, stderr, exitCode }\n                let out = '';\n                if (wasmRes.stdout) out += wasmRes.stdout;\n                if (wasmRes.stderr) out += '\\n[stderr]\\n' + wasmRes.stderr;\n                out += `\\n[exit code] ${wasmRes.exitCode ?? 0}`;\n                stdoutEl.textContent = out.trim();\n                return;\n            } catch (e) {\n                console.warn('WASM 运行器不可用：', e);\n                stdoutEl.textContent = '本地 WASM 运行器不可用，回退到本地模拟。';\n            }\n\n            // 3) 最后回退到简单模拟\n            simulateRun(code, stdin);\n        }\n\n        // 本地回退：简单模拟 scanf/printf 行为（仅作演示）\n        function simulateRun(code, input) {\n            stdoutEl.textContent = '本地模拟运行...';\n            setTimeout(() => {\n                if (/scanf\\s*\\(/.test(code) && (!input || input.trim() === '')) {\n                    stdoutEl.textContent = '错误：程序需要输入但未提供 stdin。';\n                    return;\n                }\n\n                if (!input || input.trim() === '') {\n                    stdoutEl.textContent = '提示：请在左侧输入两个整数，例如：10 20';\n                    return;\n                }\n\n                const parts = input.split(/\\s+/).map(s => parseInt(s, 10));\n                if (parts.length >= 2 && parts.every(n => Number.isFinite(n))) {\n                    const [a, b] = parts;\n                    stdoutEl.textContent = `两数之和为：${a + b}`;\n                } else {\n                    stdoutEl.textContent = '错误：输入格式不正确，请输入两个整数（例如：10 20）';\n                }\n            }, 300);\n        }\n\n        // 切换主题（轻/暗），默认暗黑\n        let isDark = true;\n        function toggleTheme() {\n            isDark = !isDark;\n            try { monaco.editor.setTheme(isDark ? 'vs-dark' : 'vs-light'); } catch (e) {}\n            themeBtn.innerHTML = isDark ? '<i class=\"fas fa-sun\"></i> 明亮' : '<i class=\"fas fa-moon\"></i> 暗色';\n        }\n\n        // ----------------- 事件绑定 -----------------\n        runBtn.addEventListener('click', runCode);\n        saveBtn.addEventListener('click', saveCode);\n        resetBtn.addEventListener('click', resetCode);\n        themeBtn.addEventListener('click', toggleTheme);\n\n        // 侧栏折叠/展开逻辑：使用 class 'collapsed'，便于动画与恢复\n        const sidebar = document.getElementById('sidebar');\n        const sidebarToggle = document.getElementById('sidebarToggle');\n        closeSb.addEventListener('click', () => {\n            sidebar.classList.add('collapsed');\n            sidebarToggle.style.display = 'flex';\n        });\n        sidebarToggle.addEventListener('click', () => {\n            sidebar.classList.remove('collapsed');\n            sidebarToggle.style.display = 'none';\n        });\n\n        // 全屏按钮\n        const fsBtn = document.getElementById('fsBtn');\n        fsBtn.addEventListener('click', () => {\n            const el = document.querySelector('.frame');\n            if (!document.fullscreenElement) {\n                el.requestFullscreen?.();\n            } else {\n                document.exitFullscreen?.();\n            }\n        });\n\n        // 页面卸载时自动保存（可选）\n        window.addEventListener('beforeunload', () => {\n            if (window.editor) localStorage.setItem('deepseek_saved_c', window.editor.getValue());\n        });\n\n        // 页面加载时：设置编辑器为暗黑主题（若 monaco 已加载则在创建时设置，若晚加载则尝试设置）\n        window.addEventListener('load', () => {\n            try { if (window.monaco) monaco.editor.setTheme('vs-dark'); } catch (e) {}\n            // 初始时隐藏侧栏恢复按钮（默认展开）\n            document.getElementById('sidebarToggle').style.display = 'none';\n        });\n    </script>\n</body>\n</html>\n```\n\n<u>现在的行为</u>\nrunCode() 会：\n    - 尝试调用 Wandbox 公共 API，带超时与错误处理；\n    - 若 Wandbox 不可用，则尝试动态加载并调用位于 /wasm/tcc_runner.js 的本地 WASM 运行器（调用约定：window.wasmRun(code, stdin) -> {stdout, stderr, exitCode}）；\n    - 两者都不可用则回退到原先的 simulateRun（两数求和演示）。\n\n**继续实现**\n在Agent帮助下搭建wasm，最终push到Github的repo上\n其中，还利用到了之前被我抛弃的Github Actions来进行wasm的自动化调整\n完整代码不作展示，项目呈现[点击此处](https://danielhe666.github.io/projects/compiler/)\n\n**优化调整**\n11.3 21:26\n1) 调整侧栏折叠的 CSS 和脚本，使编辑器在侧栏折叠后扩展填满区域并触发 Monaco 布局；\n2) 为主题添加全局 CSS 变量切换与平滑过渡，并在脚本中平滑切换 Monaco 主题；\n3) 在工具栏新增“打开本地文件”按钮与隐藏的 file input，并实现文件读取与确认覆盖逻辑。\n\n11.3 21:40\n1) 出现bug:侧边栏收起后再弹出被遮挡；（令人头大的css，一直在和sidebar斗智斗勇）\n2) 以更为简单的输出\"By ZJU C. He\"作为样例代码（因为不需要编译调试了）；\n3) 扩展文件类型；\n4) 主题持久化;\n\n11.4 22:02\n增添CHANGELOG.MD更新日志\n不再向博客中增添更新内容\n[查看更新日志](https://danielhe666.github.io/projects/compiler/CHANGELOG.md)\n\n## 小结\n\n六年前，小学刚刚毕业的我开始第一次尝试在Github上搭建自己的个人博客。最初，我天真地以为那些网站页面背后的代码都是程序员一手敲定，所以去粗浅地学习了html和javescript的语法，然后手写了最初的`index.html`。然后，我接触到一款同样是搭建在Github Pages上的游戏“膜Siyuan“，我在Github上找到了那位大佬的repo，看光了他所有的前端，却没有办法通关游戏，那时，我认识到想要搭建一个网站是一件非常需要经验和技术的事情。\n\n后来，通过同学的介绍认识了像Hugo、Hexo这种搭建个人博客的工具，我感到十分新奇。对照着各种社区博客照搬照抄地建了非常幼稚的博客。\n\n渐渐的，普通的静态网页已经无法吸引我更多的兴趣，Github Pages也成为了我生成下载文件直链的工具，我不再管理我的博客。\n\n直到现在，一个崭新的，完全改变（在我看来）Programming格局的工具诞生并迅速成熟，它完全打破了技术与非技术的边界。\n\n从“会实现”到“会描述”，这是超越程序语言对于机器语言提升的跨越。人工智能的Agent真正意义上的实现了“代理”。我只需要向他描述我的诉求，然后构思与设计，完成一些像push这样简单的工作，我便可以实现很多我完全不了解的功能与代码。就比如Online C Compiler这个project，它源自于我在Mac上对于复杂环境配置的厌烦这一灵光乍现。然而，就是这么一个小小的spark，大模型带我走向了实现。\n\n那么我们不禁反思，当“不可能”成为“可能”，人类的学习方式是否应该做出改变？当我们不需要再满社区地大海捞针，这些Easy Work的省略就一定会迫使人们的思维转向更高效的Solutions，由是我们又可以继续印证那句老话：\n\n    > 人类的最大优势在于使用工具。\n    ","tags":["项目"]},{"url":"/2025/11/01/数理学习/微积分/","content":"# 微积分\n## 期中考试题分析\n### 24-25\n1.求极限\n- 等价无穷小\n- 泰勒展开\n\n2.用数列极限定义证明极限\n- 定义证明极限套路\n\n3.计算极限\n- 1的无穷大次类型\n\n4.计算极限\n- 放缩夹逼法\n\n5.判断间断点类型\n\n6.复杂函数求导\n7.隐函数求导数值\n8.计算极坐标下曲线在直角坐标中的切线方程\n- 参数式函数的导数\n\n9.求高阶导（证明）\n10.求导相关\n11.连续性与可导性判断\n12.无穷大定义\n13.导数相关（较难）\n"},{"title":"Web","url":"/2025/02/11/CTF/Web/","content":"# Web\n## Web前置技能\n### HTTP协议\n**做题手段：Burp Suite**\n- 请求方式\n- 302跳转\n- Cookie\n- 基础认证\n- 响应包源代码\n## 信息泄露\n### 目录便历\n**做题手段：dirsearch**\n配置：git clone\n```\ncd dirsearch\npython3 dirsearch.py -u url\n```\n### PHPINFO\n直接看php代码\n### 备份文件下载\n目录便历里直接找\n### Git泄露\n**做题手段：GitHack**\n配置：git clone\n```\ncd GitHack\npython2 GitHack.py <url>/.git\n```\n### SVN泄露\n#### SVN泄露介绍\nSVN（Subversion）是一种集中式版本控制系统，广泛用于软件开发中管理文件版本变更，通过创建 .svn 隐藏目录存储版本库元数据（如文件快照、提交历史、配置信息等），方便开发者追踪代码修改、回溯历史版本。\n\n而 SVN 泄露 则是因网站部署时未删除 .svn 目录，导致该目录被公开访问所引发的信息泄露问题。攻击者可利用 dvcs-ripper 等工具，通过访问目标网站的 .svn 路径（如 http://example.com/.svn），提取其中的版本库数据，还原源代码、历史提交记录甚至旧版本中的敏感信息等。\n#### DVCS-Ripper工具\n1. 工具简介\n    DVCS-Ripper（通常也叫 rip-*.pl）是一款专门用于检测和利用配置错误的安全工具。它的核心功能是：当发现一个网站意外地暴露了其版本控制系统的元数据目录（如 .git, .svn, .hg）时，它能够远程下载并重建整个代码仓库，从而造成源代码泄露。\n    ```\n    项目地址： https://github.com/kost/dvcs-ripper \n    ```\n2. 下载安装\n    ```\n    sudo git clone https://github.com/kost/dvcs-ripper\n    ```\n    - 基本使用方法\n    DVCS-Ripper 的运行依赖于一些 Perl 模块，需要安装响应的依赖库，具体如下所示。\n    ```\n    #安装依赖文件\n    sudo apt-get install perl libio-socket-ssl-perl libdbd-sqlite3-perl libclass-dbi-perl libio-all-lwp-perl\n    ```\n    进入到dvcs-ripper目录中，验证安装是否成功，具体方法如下所示。\n    ```\n    # 进入你克隆的目录\n    cd dvcs-ripper\n \n    # 运行工具需要指定 perl 解释器和脚本路径\n    perl rip-git.pl --help\n \n    # 或者给脚本添加执行权限后直接运行\n    chmod +x rip-git.pl\n    ./rip-git.pl --help\n\n    ```\n3. 利用步骤\ndvcs-ripper工具对svn源码泄露的利用过程如下所示，先安装 perl 及相关依赖，克隆工具仓库并进入目录；再通过 rip-svn.pl 脚本，以目标包含.svn 目录的 URL 为参数执行提取；完成后进入生成的本地仓库目录，查看提取出的版本库文件、历史记录等内容，从中寻找敏感信息，整个过程通过解析泄露的 SVN 目录结构自动重建仓库实现信息获取。\n```\n# 1. 安装dvcs-ripper（确保系统已安装perl及相关依赖）\nsudo apt install -y perl libio-socket-ssl-perl libdbi-perl libdbd-mysql-perl\n \n# 2. 克隆dvcs-ripper仓库\ngit clone https://github.com/kost/dvcs-ripper.git\ncd dvcs-ripper\n \n# 3. 利用rip-svn.pl脚本检测并提取SVN泄露（-u指定目标URL）\nperl rip-svn.pl -u http://example.com/.svn/ \n# 工具会自动执行以下步骤：\n# - 探测并下载SVN核心文件：entries, wc.db, pristine/ 等\n# - 解析entries或wc.db文件获取版本库文件列表和校验和\n# - 根据校验和从pristine/目录下载所有文件内容\n# - 在本地重建完整的SVN工作副本，保存在以目标主机命名的目录中\n# - 完成后可直接浏览下载的文件寻找配置文件、源代码和敏感信息\n \n# 4. 进入生成的本地仓库目录（通常以目标域名命名）\ncd example.com\n \n# 5. 查看提取的SVN版本库内容，寻找敏感信息（如配置文件、历史提交记录）\nls -la\ncat 敏感文件路径  # 例如：cat config.php 或查看日志文件\n \n# 说明：整个过程通过解析目标网站暴露的.svn目录结构，自动下载版本库元数据、文件快照等，重建本地可访问的SVN仓库，便于挖掘泄露的敏感数据\n```\n#### 解题关键步骤\n```\nsudo ./rip-svn.pl -u http://challenge-fbc675f2c68c5419.sandbox.ctfhub.com:10800/.svn\n```\n```\ngrep -r \"ctfhub\" .svn/pristine/\n```"},{"title":"Hexo建站笔记","url":"/2025/01/11/Hexo建站笔记/","content":"# Hexo建站笔记\n## 初始化\n1. Node.js配置\n官网下载\n2. 安装Hexo\n```\nnpm install -g hexo-cli\n```\n## 开始\n```\n#新建\nhexo init <name>\n```\n\n## 部署\n在_config.yml文件底部\n```\ndeploy:\n  type: git\n  repo: https://github.com/你的用户名/你的用户名.github.io.git\n  branch: main\n```\n"}]